!function(){var n=[];Object.create||(Object.create=function(n,t){function e(){}if("undefined"!=typeof t)throw"The multiple-argument version of Object.create is not provided by this browser and cannot be shimmed.";return e.prototype=n,new e});var t,e=function(){return{}},o=function(n,t){var o,r=window;if(n){var i=n.split(".");o=i.pop(),$.each(i,function(n,t){var o=r[t];return o?void(r=o):void(r=r[t]=new e)})}return o&&(r[o]=t),t},r=function(n,t){var e=t||window,o=e;if(n){var r=n.split(".");$.each(r,function(n,t){return o=e=e[t],o?void 0:!1})}return o},i=function(e,i){var c=e.name,f=(e.view,e.parent);if(f&&"string"==typeof f){var u=f;if(f=r(f),!f)throw"Parent not found!["+u+"]"}i||$.each(n,function(n,t){f=t.fn.call(t.scope,e,f)});var s=a(f||t,e);return c?o(c,s):s},a=function(n,t){var e=n.prototype,o=Object.create(e),r=function(){var n=this.init;n&&n.apply(this,arguments)};return $.each(t,function(n,t){"method"==n?c(o,t):o[n]=t}),r.prototype=o,r},c=function(n,t){var e=t||{};$.each(e,function(t,e){var o=n[t];void 0!=o&&"function"==typeof o?"init"===t?n[t]=function(n,t){return function(){return n.apply(this,arguments),t.apply(this,arguments)}}(o,e):n[t]=function(n,t){return function(){return this.parent=n,t.apply(this,arguments)}}(o,e):n[t]=e})},f=function(){};t=a(f,{on:function(n){var t,e=this.__eventMap,o=n.name,r=n.scope,i=n.fn;e||(e=this.__eventMap={}),t=e[o],t||(t=e[o]=[]),t.push({scope:r,fn:i})},fire:function(n,t){var e=this.__eventMap,o=(e?e[n]:[])||[];$.each(o,function(n,e){var o=e.scope,r=e.fn;r.call(o,t)})},getHandler:function(n){var t=this[n+"Handler"];if(!t)throw new Error("Handler nout found.["+n+"]");return t}});var u=function(t){n.push(t)},s=window.nb={};s.name=o,s.define=i,s.extend=a,s.addDefineInterceptor=u,s.get=r}(),function(){nb.define({name:"nb.Model",method:{init:function(){this.__model={},this.__eventMap={}},set:function(n,t,e){var o=this.__model,r=o[n],i=this.__eventMap,a=i[n],c=(a?a.before:[])||[],f={name:n,origin:r,data:t},u=e?e.skipSameValue:!0,s=e?e.noBefore:!1;u&&t==r||(1!=s&&$.each(c,function(n,t){var e=t.scope,o=t.fn;o.call(e,f)}),o[n]=t,c=(a?a.after:[])||[],$.each(c,function(n,t){if(t){var e=t.scope,o=t.fn,r=t.once;o.call(e,f),r&&delete c[n]}}))},get:function(n){return this.__model[n]},onChange:function(n){var t,e=this.__eventMap,o=n.name,r=n.type||"after",i=n.once,a=n.scope,c=n.fn,f=e[o];f||(f={},e[o]=f),t=f[r],t||(t=[],f[r]=t),t.push({scope:a,fn:c,once:i})}}})}(),function(){var n={string:function(n){var t=n.$,e=t.prop("tagName").toLowerCase(),o=n.content;"input"==e?t.val(o):t.text(o)},object:function(n){var t=n.content,e=n.root,o=r(t,e),i=t.$name,a=o.$();if(n.$.append(a),i){var c="$"+i,f=e[c];if(f){if("array"!=$.type(f)){var u=[f];f=e[c]=u}f.push(o)}else e[c]=o}},array:function(n){$.each(n.content,function(e,o){t({$:n.$,container:n.container,root:n.root,content:o})})},undefined:function(){}},t=function(t){var e=t.content,o=$.type(e);n[o](t)},e={"class":function(n,t,e,o){var r=e["class"];r&&t.addClass(r)},style:function(n,t,e,o){var r=e.style;r&&t.css(r)},content:function(n,e,o,r){t({$:e,container:n,root:r||n,content:o.content})},binder:function(n,t,e,o){var r=o||n,i=r.binders=r.binders||[];i.push({$:t,def:e.binder})}},o=function(n,t){var e;if(void 0!=n){if(e=this["$"+n],!e)throw new Error("Child not found.Please check the $name property.["+n+"]")}else e=this;return t||(e=e.$root||e.__viewInstance.$root),e},r=function(n,t){var e;return e=n.$type?a(n,t):n.$template?i(n,t):c(n,t)},i=function(n,t){},a=function(n,t){var e=n.$type,o=n.$opts;if("string"==typeof e){var r=e;if(e=nb.get(r),null==e)throw"Type not found["+r+"]"}var i=new e;return o&&i.setOpts(o),i},c=function(n,t){var e={$:o};if($.isArray(n)){var r=$("<div>");$.each(n,function(n,t){var o=t.$name,i=c(t,e);o&&(e["$"+o]=i),r.append(i.$())}),e.$root=r.children()}else e.$root=f(e,n,t);return e},f=function(n,t,o){var r=t.tag||"div",i=$("<"+r+">");return $.each(t,function(r,a){var c=r.toLowerCase();if("tag"==c)return!0;var f=e[r];f?f(n,i,t,o):0===c.indexOf("$")?i.attr("data-nb-"+c.substring(1),a):i.attr(c,a)}),i},u=function(){var n,t,e=this,o=this.view;if(o&&(n=this.__viewInstance=r(o)),n&&(t=n.binders,t&&t.length>0)){var i=this.__model=new nb.Model;$.each(t,function(n,t){var o=t.$,r=o.prop("tagName"),a=t.def;o.on("keyup",function(n){var t=$(this),e=t.val();a.key;i.set(a.key,e,{skipSameValue:!0})}),i.onChange({name:a.key,scope:e,fn:function(n){var t,e=n.data;t="INPUT"==r?o.val():o.text(),e!=t&&("INPUT"===r?o.val(e):o.text(e))}})})}},s=function(n,t){return this.__viewInstance.$(n,t)},p=function(n){this.__model=n},v=function(){return this.__model};nb.addDefineInterceptor({scope:this,fn:function(n,t){return n&&n.view?t&&t.prototype.view?nb.define({parent:t,method:{$:s,getModel:v,setModel:p}},!0):nb.define({parent:t,method:{init:u,$:s,getModel:v,setModel:p}},!0):t}})}();